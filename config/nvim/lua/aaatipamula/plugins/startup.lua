local header = {
  type = "text",
  oldfiles_directory = false,
  align = "center",
  fold_section = false,
  title = "Header",
  margin = 5,
  -- content = {
  --   "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⠟⠛⣋⣉⣉⣭⣭⣭⣭⣭⣉⣉⠛⠻⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  --   "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠿⠛⣉⣤⣶⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣶⣤⡉⠻⣿⠟⣋⣥⣤⣌⠙⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  --   "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⠋⣤⣶⣤⠉⣡⣶⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣙⠻⣿⣿⣿⣿⣿⣿⣷⣄⢺⣿⣿⣿⣿⣷⡈⢿⣿⣿⣿⣿⣿⣿⣿⣿",
  --   "⣿⣿⣿⣿⣿⣿⣿⣿⣿⡟⢠⣾⣷⠆⣡⣾⣿⡿⠋⣡⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⣦⡙⢿⣿⣿⣿⣿⣿⣷⡉⠻⣿⣿⣿⣿⡈⢻⣿⣿⣿⣿⣿⣿⣿",
  --   "⣿⣿⣿⣿⣿⣿⣿⣿⠟⣰⣿⡿⣡⣾⣿⣿⠟⣠⣾⣿⣿⣿⣿⣿⣿⠙⣿⣿⢿⣿⣿⣿⣿⣿⣿⢦⡻⣿⣿⣿⣿⣿⡝⡔⣌⢿⣿⣿⣷⠈⣿⣿⣿⣿⣿⣿⣿",
  --   "⣿⣿⣿⣿⣿⣿⣿⡟⢰⣿⡟⣰⣿⣿⣿⠋⣴⣿⣿⡿⣹⣿⣿⣿⠃⣴⣌⢻⣦⠙⢿⣿⣿⣿⣿⣷⣷⡜⣿⣿⣿⣿⣿⣿⡘⢎⢿⣿⣿⡇⢸⣿⣿⣿⣿⣿⣿",
  --   "⣿⣿⣿⣿⣿⣿⣿⢁⣿⡿⣰⣿⣿⣿⡟⣸⣿⣿⡿⢡⣿⢋⡾⠃⣰⣿⣿⣷⣍⠳⣄⠙⠻⣿⣿⣿⣿⣿⡘⣿⣿⣿⣿⣿⣧⠈⡞⣿⣿⣿⠈⣿⣿⣿⣿⣿⣿",
  --   "⣿⣿⣿⣿⣿⣿⡇⣸⣿⢣⣿⣿⣿⣿⢃⣿⣿⠟⢠⠟⣱⠟⣡⣾⣿⣿⣿⣿⣿⣿⠦⢕⡊⢈⠛⠿⣿⣿⡧⢻⣿⣿⣿⣿⣿⣸⡸⢹⣿⣿⡆⢻⣿⣿⣿⣿⣿",
  --   "⣿⣿⣿⣿⣿⣿⠃⣿⡿⣼⣿⣿⣿⣿⢸⡿⡋⠐⠡⣈⣤⡌⢻⣿⣿⣿⣿⣿⣿⣧⣛⣛⣛⣥⣴⣤⣄⣋⡹⢸⣿⣿⣿⣿⣿⡇⡇⡏⣿⣿⡇⢸⣿⣿⣿⣿⣿",
  --   "⣿⣿⣿⣿⣿⣿⠀⣿⡇⣿⣿⣿⣿⣿⠐⣊⣤⣶⣶⣿⣶⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣾⣿⡿⢸⣿⡟⡇⠀⣇⣿⣿⣇⢸⣿⣿⣿⣿⣿",
  --   "⣿⣿⣿⣿⣿⣿⢸⣿⡇⣿⢿⣿⢹⣿⢸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⠿⠿⠿⠿⢿⣿⢿⣿⣇⢸⣿⡇⢇⣐⣯⣭⣭⣭⣬⣭⣭⣭⣍⢻",
  --   "⣿⡿⠿⠿⠛⠛⢸⣟⡃⣿⢸⣿⠈⣿⡆⣿⡿⠛⠛⠛⠋⠉⠙⣿⣿⣿⣿⣿⣿⣿⣇⣀⣀⣀⣠⣤⣤⣼⣿⢸⡿⣸⣸⣿⢸⢘⣫⡩⡖⣶⣶⣬⣛⣴⠟⣡⣾",
  --   "⣯⠐⢶⡟⢫⠭⠝⣛⢓⢹⠀⣿⡜⡸⣧⢻⣷⣴⣶⣶⣶⣶⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⢋⢟⣿⡟⡼⣱⢇⣿⢇⠀⣿⣿⠇⢣⣿⣿⠿⢋⣤⣾⣿⣿",
  --   "⣿⣿⣦⣍⠳⢿⣿⣎⠜⡜⢰⡘⣷⢱⠹⡜⣏⣞⣽⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⢑⣴⡇⣾⠏⠄⠤⢟⣛⣤⠿⣛⣥⠀⣾⣿⣿⣿⣿",
  --   "⣿⣿⣿⣿⣿⡆⢨⡛⠶⣔⣘⣃⡘⣧⠠⢀⠹⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⣿⣿⠇⢫⡎⢱⠌⢟⣫⣵⣾⣿⣿⡀⣿⣿⣿⣿⣿",
  --   "⣿⣿⣿⣿⣿⡇⢸⣿⣷⡆⣭⣋⠺⠎⠂⠘⣿⣿⣿⣿⣿⣿⣿⣿⣙⣛⣫⣛⣛⣩⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⠀⠉⣭⡶⣾⣿⣿⣿⣿⣿⣿⡇⢿⣿⣿⣿⣿",
  --   "⣿⣿⣿⣿⣿⠀⣿⣿⣿⡇⣿⡟⡻⣿⣿⣷⡹⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠟⣠⣾⠀⣿⢸⢸⣿⣿⣿⣿⣿⣿⡇⢸⣿⣿⣿⣿",
  --   "⣿⣿⣿⣿⡇⢸⣿⣿⣿⣿⣿⢡⠁⣿⣿⣿⡇⠈⠻⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠿⠋⠠⣾⣿⣿⠀⣿⠠⢸⣿⣿⣿⣿⣿⣿⡇⢸⣿⣿⣿⣿",
  --   "⣿⣿⣿⣿⢀⡿⢹⣿⣿⣿⣿⢰⡆⣿⣿⣿⡇⣸⣷⠄⡉⣙⡻⠿⠿⣿⣿⣿⣿⣿⠿⠟⠛⢉⣀⣭⡴⠀⣿⣿⣿⠀⣿⢰⢸⣿⣿⣿⣿⡟⢹⣇⢸⣿⣿⣿⣿",
  --   "⣿⣿⣿⠇⣸⠃⣿⣿⣿⣿⣿⣇⣣⣿⣿⣿⠀⠿⠿⠄⢛⢂⡤⢶⣤⣤⣤⣤⣶⠶⠶⠶⣛⣛⣭⣵⢞⠀⢋⣉⡥⣤⣝⢪⣾⣿⣿⡟⣿⡇⡞⣿⠀⣿⣿⣿⣿",
  --   "⣿⣿⣿⠀⡏⠀⣿⣿⡿⡿⣿⣿⣿⣿⣿⡟⢀⣴⡶⢦⢘⢸⡇⠋⡉⠐⢶⣶⣿⣿⣿⣿⣿⡿⣛⣵⢟⣠⢙⣩⣾⣿⣿⣧⡹⢿⣿⢷⣿⢳⠇⣿⠀⣿⣿⣿⣿",
  --   "⣿⣿⡗⢸⠁⠀⣿⣿⠀⡇⣿⣿⠟⣫⣭⣶⣿⣿⣷⡀⢌⢰⡇⠘⠴⠃⣸⣿⣿⡿⠿⣛⡵⢞⡫⢔⣫⣶⣿⣿⣿⣿⣿⣿⣿⣶⣬⡘⠟⣼⠀⢸⢸⣿⣿⣿⣿",
  --   "⣿⣿⡇⢸⠀⠀⣿⣿⣸⢡⢛⣅⢾⣿⣿⣿⣿⣿⣿⣿⣦⣜⡳⢥⣒⣊⣙⣛⡓⠪⢍⣒⣬⣵⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠿⣟⣛⣂⠛⠀⢸⠈⣿⣿⣿⣿",
  --   "⣿⣿⡇⢸⠸⡀⢻⣿⡟⠃⣁⠙⢦⡙⢿⣿⣿⣿⡿⢛⠛⣛⣳⣥⣤⣬⣵⣶⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠿⣛⡭⠖⢋⣉⣤⣦⡀⠀⡎⢰⣿⣿⣿⣿",
  --   "⣿⣿⣧⠸⠀⣧⡘⠟⢡⣾⣿⣷⣤⡙⠶⣍⣛⠿⢣⡟⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠿⣛⣭⠖⢋⣡⣶⣿⣿⣿⣿⣿⣿⣆⠀⢿⣿⣿⣿⣿",
  --   "⣿⣿⣿⣆⠃⠸⠁⣴⣿⣿⣿⣿⣿⣿⣦⣈⢭⣛⡸⢷⣭⣛⡻⠿⢿⣿⣿⣿⣿⣿⣿⡿⠿⢟⣛⣭⠶⠛⣉⣴⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣆⠈⣿⣿⣿⣿",
  --   "⣿⣿⣿⣿⡷⠀⣼⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⡎⢡⡃⣨⡉⠛⠛⠿⠶⠶⠶⠶⠶⠶⢚⡛⢍⠅⣤⣶⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣇⠘⣿⣿⣿",
  --   "⣿⣿⣿⣿⣁⣼⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡇⢸⠇⣬⡙⡄⢰⣶⣶⣿⣿⣿⣯⣷⣶⠆⣿⡇⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣦⣼⣿⣿",
  --   "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⢿⣿⣿⣿⣿⠁⣿⠀⣿⣿⣎⠂⠹⣿⣿⣿⣿⣿⣿⣿⡆⣿⡄⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⡿⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  --   "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣇⣀⡁⠉⠛⠛⢀⡿⢰⡿⠿⣿⣦⣤⣿⣿⣿⣿⣿⣿⣿⡇⣿⣷⣿⡿⠿⠻⠿⠛⢻⠛⠉⢐⣠⣴⣶⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  --   "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⣶⣦⣥⣬⣤⣀⣀⣀⣐⣀⣈⣀⣉⣁⣁⣀⣀⣛⣁⣒⣀⣤⣬⣤⣴⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  -- },
  content = {
    "⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣤⣤⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣀⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀",
    "⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣾⣿⣿⣿⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣼⣿⣿⣿⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀",
    "⠀⠀⠀⠀⠀⠀⠀⠀⢀⣾⣿⣿⣿⣿⣷⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣼⣿⣿⣿⣿⣿⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀",
    "⠀⠀⠀⠀⠀⠀⠀⠀⣾⣿⣿⣿⣿⣿⣿⣧⠀⠀⠀⠀⠀⠀⠀⠀⠀⢰⣿⣿⣿⣿⣿⣿⣧⠀⠀⠀⠀⠀⠀⠀⠀⠀",
    "⠀⠀⠀⠀⠀⠀⠀⣼⣿⣿⣿⣿⣿⣿⣿⣿⣇⠀⠀⠀⠀⠀⠀⠀⢀⣿⣿⣿⣿⣿⣿⣿⣿⡆⠀⠀⠀⠀⠀⠀⠀⠀",
    "⠀⠀⠀⠀⠀⠀⢰⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡄⠀⠀⠀⠀⠀⠀⣼⣿⣿⣿⣿⣿⣿⣿⣿⣷⠀⠀⠀⠀⠀⠀⠀⠀",
    "⠀⠀⠀⠀⠀⢀⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣧⠀⠀⠀⠀⠀⢰⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡇⠀⠀⠀⠀⠀⠀⠀",
    "⠀⠀⠀⠀⠀⢸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡄⠀⠀⠀⢀⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣇⠀⠀⠀⠀⠀⠀⠀",
    "⠀⠀⠀⠀⠀⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠀⠀⠀⠀⠀⠀⠀",
    "⠀⠀⠀⠀⢀⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠀⠀⠀⠀⠀⠀⠀",
    "⠀⠀⠀⠀⢸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠀⠀⠀⠀⠀⠀⠀",
    "⠀⠀⠀⠀⠈⣿⣿⣿⣿⣿⣿⠟⠉⠀⠀⠀⠙⢿⣿⣿⣿⣿⣿⣿⣿⡿⠋⠀⠀⠙⢻⣿⣿⣿⣿⠀⠀⠀⠀⠀⠀⠀",
    "⠀⠀⠀⠀⠀⣿⣿⣿⣿⣿⠃⠀⠀⠀⠀⣠⣄⠀⢻⣿⣿⣿⣿⣿⡿⠀⣠⣄⠀⠀⠀⢻⣿⣿⣏⠀⠀⠀⠀⠀⠀⠀",
    "⠀⠀⠀⠀⠀⣾⣿⣿⣿⣿⠀⠀⠀⠀⠰⣿⣿⠀⢸⣿⣿⣿⣿⣿⡇⠀⣿⣿⡇⠀⠀⢸⣿⣿⣿⠀⠀⠀⠀⠀⠀⠀",
    "⠀⠀⠀⠀⠀⣿⣿⣿⣿⣿⣄⠀⠀⠀⠀⠙⠃⠀⣼⣿⣿⣿⣿⣿⣇⠀⠙⠛⠁⠀⠀⣼⣿⣿⣿⡇⠀⠀⠀⠀⠀⠀",
    "⠀⠀⠀⠀⠀⣿⣿⣿⣿⣿⣿⣷⣤⣄⣀⣠⣤⣾⣿⣿⣿⣿⣽⣿⣿⣦⣄⣀⣀⣤⣾⣿⣿⣿⣿⠃⠀⠀⢀⣀⠀⠀",
    "⠰⡶⠶⠶⠶⠿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡟⠛⠉⠉⠙⠛⠋⠀",
    "⠀⠀⢀⣀⣠⣤⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⠷⠶⠶⠶⢤⣤⣀⠀",
    "⠀⠛⠋⠉⠁⠀⣀⣴⡿⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣯⣤⣀⡀⠀⠀⠀⠀⠘⠃",
    "⠀⠀⢀⣤⡶⠟⠉⠁⠀⠀⠉⠛⠿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠿⠟⠉⠀⠀⠀⠉⠙⠳⠶⣄⡀⠀⠀",
    "⠀⠀⠙⠁⠀⠀⠀⠀⠀⠀⠀⠀⢰⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡏⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠉⠁⠀⠀",
    "⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢠⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀",
    "⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀",
    "⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣼⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀",
    "⠀⠀⠀⠀⠀⠀⠀⠀⠀⣸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀",
    "⠀⠀⠀⠀⠀⠀⠀⠀⣴⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀",
    "⠀⠀⠀⠀⠀⠀⠀⣴⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀",
    -- "⠀⠀⠀⠀⠀⠀⣰⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀",
    -- "⠀⠀⠀⠀⠀⢰⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀",
    -- "⠀⠀⠀⠀⢀⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀",
    -- "⠀⠀⠀⠀⣸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀",
  },
  highlight = "Statement",
  default_color = "",
  oldfiles_amount = 0,
}

local body = {
  type = "mapping",
  oldfiles_directory = false,
  align = "center",
  fold_section = false,
  title = "Basic Commands",
  margin = 5,
  content = {
    { " Find File", "Telescope find_files", "<leader>ff" },
    { "󰍉 Find Word", "Telescope live_grep", "<leader>rg" },
    { " Recent Files", "Telescope oldfiles", "<leader>of" },
    { " New File", "lua require'startup'.new_file()", "<leader>nf" },
  },
  highlight = "String",
  default_color = "",
  oldfiles_amount = 0,
}

return {
  "startup-nvim/startup.nvim",
  dependencies = { "nvim-telescope/telescope.nvim", "nvim-lua/plenary.nvim" },
  config = function()
    require "startup".setup({
      header = header,
      body = body,
      options = {
        mapping_keys = true,
        cursor_column = 0.5,
        empty_lines_between_mappings = true,
        disable_statuslines = true,
        paddings = { 1, 3, 3, 0 },
      },
      mappings = {
        execute_command = "<CR>",
        open_file = "o",
        open_file_split = "<c-o>",
        open_section = "<TAB>",
        open_help = "?",
      },
      parts = { "header", "body" },
    })

    -- Handle directory opening with Startup
    vim.api.nvim_create_autocmd("VimEnter", {
      callback = function()
        local bufname = vim.fn.bufname()
        local is_directory = vim.fn.isdirectory(bufname) == 1
        if bufname == "" or is_directory then
          -- If a directory was opened, change to it
          if is_directory then
            vim.cmd("cd " .. vim.fn.fnameescape(bufname))
            -- Close the netrw buffer that vim opens for directories
            -- We need to do this after a small delay to ensure netrw has loaded
            vim.defer_fn(function()
              -- Find and close any netrw buffers
              for _, buf in ipairs(vim.api.nvim_list_bufs()) do
                if vim.bo[buf].filetype == "netrw" then
                  vim.api.nvim_buf_delete(buf, { force = true })
                end
              end
            end, 10)
          end
          -- Display the startup screen
          vim.cmd("Startup display")
        end
      end,
    })
  end
}
